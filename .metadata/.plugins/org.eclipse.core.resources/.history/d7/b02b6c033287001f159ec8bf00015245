package TH1;

import java.awt.*;
import java.awt.event.*;
import java.io.IOException;
import java.util.ArrayList;

import javax.swing.*;

public class SwingApp {
    private JPanel contentPanel;
    private CardLayout cardLayout;
    private String[] data;
    private final int APP_WIDTH = 800 ,APP_HEIGHT = 400;

    public SwingApp() {
        JFrame frame = new JFrame("Quản lý ngôn ngữ");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(APP_WIDTH, APP_HEIGHT);

        cardLayout = new CardLayout();
        contentPanel = new JPanel(cardLayout);

        MenuBar menuBar = new MenuBar();
        frame.setJMenuBar(menuBar.getMenuBar());

        // Panel mặc định
//        JPanel default_panel = new JPanel();
//        contentPanel.add(default_panel.getRootPane(), "Default");

        // Panel hiển thị dữ liệu
        	JPanel display_panel = new JPanel();
        	display_panel.setLayout(new GridBagLayout());
        	GridBagConstraints gbc = new GridBagConstraints();
        	
        	gbc.gridx = 6;
        	gbc.gridy = 0;
        	gbc.gridwidth = 6;
        	gbc.anchor = GridBagConstraints.WEST;
        	
            DisplayLanguages dl = new DisplayLanguages();
            display_panel.add(dl.getFPanel(),gbc);
            contentPanel.add(display_panel, "Data");
//            contentPanel.add(dl.getFPanel(), "Data");


        // Panel thêm ngôn ngữ
            AddLanguage al = new AddLanguage();
            al.addComboboxListener();
            al.getAddButton().addActionListener(new ActionListener() {
				
				@Override
				public void actionPerformed(ActionEvent e) {
					data = al.getLanguageInfo();
					AppHandler.SaveToText(data[0],data[1],Integer.parseInt(data[2]),data[3],data[4],data[5]);
					JOptionPane.showMessageDialog(null, "Thêm thành công!", null, JOptionPane.INFORMATION_MESSAGE);
					al.clearTextField();
				}
			});
            contentPanel.add(al.getAddPanel(), "Add_Language");

        menuBar.getView().addActionListener(new ActionListener() {
			
			@Override
			public void actionPerformed(ActionEvent e) {
				dl.update();
				cardLayout.show(contentPanel, "Data");
			}
		});
        menuBar.getAdd().addActionListener(e -> cardLayout.show(contentPanel, "Add_Language"));

        Image icon = Toolkit.getDefaultToolkit().getImage("HelloNigga.jpg");
        frame.setIconImage(icon);
        frame.add(contentPanel);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(SwingApp::new);
    }
}
