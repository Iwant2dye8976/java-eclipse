package swingapp;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.*;

public class SearchLanguage {
	private JLabel label;
	private JTextField search_box;
	private JButton search_btn;
	private JComboBox<Object> search_type;
	private String[] types = { "Năm phát hành", "Tên ngôn ngữ", "Tác giả", "Ứng dụng" };
	private JPanel SearchPanel;
	private GridBagLayout gridbag;

	public SearchLanguage(ArrayList<Language> lang, DisplayLanguages dl) {
		createSearch();
		addActionListeners(lang, dl);
	}

	public void createSearch() {
		gridbag = new GridBagLayout();
		SearchPanel = new JPanel(gridbag);
		label = new JLabel("Tìm kiếm theo");
		search_box = new JTextField(20);
		search_btn = new JButton("Tìm kiếm");
		search_type = new JComboBox<Object>(types);

		GridBagConstraints gbc = new GridBagConstraints();
		gbc.insets = new Insets(5, 5, 5, 5);

		gbc.gridx = 0;
		gbc.gridy = 0;
		SearchPanel.add(label, gbc);

		gbc.gridx = 1;
		gbc.gridy = 0;
		SearchPanel.add(search_type, gbc);

		gbc.gridx = 2;
		gbc.gridy = 0;
		SearchPanel.add(search_box, gbc);

		gbc.gridx = 3;
		gbc.gridy = 0;
		SearchPanel.add(search_btn, gbc);
	}

	private void addActionListeners(ArrayList<Language> lang, DisplayLanguages dl) {
		search_btn.addActionListener(new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent e) {
				String search_text = search_box.getText().toLowerCase();
				ArrayList<Language> filterd = new ArrayList<>();
				String[][] data = null;
				switch (search_type.getSelectedIndex()) {
				case 0:
					String toFind = search_box.getText().toLowerCase().trim();
					for (int i = 0; i < lang.size(); i++) {
						if (lang.get(i).toString().toLowerCase().contains(search_text)) {
							filterd.add(lang.get(i));
						}
					}
					dl.getDataTable().setModel(null);
					break;
				case 1:

					break;
				case 2:

					break;
				case 3:

					break;
				}
			}
		});
	}

	public String getSelectedTypes() {
		return search_type.getSelectedItem().toString();
	}

	public JPanel getSearchPanel() {
		return SearchPanel;
	}

	public GridBagLayout getGridbag() {
		return gridbag;
	}
}
